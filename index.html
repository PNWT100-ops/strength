<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Strength</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;}

body{
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
  background:linear-gradient(135deg,#667eea,#764ba2);
  min-height:100vh;
  padding-bottom:40px;
}

.header{
  position:sticky;
  top:0;
  padding:20px;
  text-align:center;
  background:rgba(0,0,0,0.3);
  color:#fff;
  backdrop-filter:blur(10px);
}

.reload-btn{
  position:absolute;
  right:20px;
  top:20px;
  background:none;
  border:none;
  color:rgba(255,255,255,0.4);
  font-size:18px;
  cursor:pointer;
}

.container{
  max-width:600px;
  margin:0 auto;
  padding:20px;
}

/* ===== ÁõÆÊ®ôÔºàÁôΩÁ≥ªÔºâ ===== */
.goal-section{
  background:linear-gradient(135deg,#1f1f3a,#2e2e5f);
  border-radius:12px;
  padding:20px;
  margin-bottom:20px;
}

.goal-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.goal-title{
  font-size:18px;
  font-weight:bold;
  color:#fff;
}

.add-goal-btn{
  width:32px;
  height:32px;
  border-radius:50%;
  border:1px solid rgba(255,255,255,0.5);
  background:rgba(255,255,255,0.15);
  color:#fff;
  font-size:20px;
}

.goal-input{
  width:100%;
  padding:12px;
  border-radius:8px;
  border:none;
  font-size:16px;
  margin-top:12px;
  display:none;
}

.goal-input.show{display:block;}

.goal-item{
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px 0;
  border-bottom:1px solid rgba(255,255,255,0.15);
}

.goal-bullet{
  width:6px;
  height:6px;
  background:rgba(255,255,255,0.9);
  border-radius:50%;
}

.goal-text{
  flex:1;
  font-size:15px;
  color:#fff;
}

.remove-goal-btn{
  background:none;
  border:none;
  color:rgba(255,255,255,0.6);
  font-size:16px;
}

/* ===== ÊõúÊó•ÔºàÂÖÉ„Éï„Ç°„Ç§„É´Ê∫ñÊã†Ôºâ ===== */
.day-card{
  background:#fff;
  border-radius:12px;
  margin-bottom:20px;
  overflow:hidden;
  box-shadow:0 4px 6px rgba(0,0,0,0.1);
}

.day-header{
  padding:15px 20px;
  background:#f3f4f6;
  display:flex;
  justify-content:space-between;
  align-items:center;
  cursor:pointer;
}

.day-name{
  font-size:18px;
  font-weight:bold;
}

.add-btn{
  width:32px;
  height:32px;
  border-radius:50%;
  border:none;
  background:rgba(102,126,234,0.2);
  color:#667eea;
  font-size:20px;
}

.exercise-selector{
  display:none;
  padding:15px;
  background:#eff6ff;
}

.exercise-selector.show{display:block;}

.exercise-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}

.exercise-option{
  padding:10px;
  background:#fff;
  border-radius:8px;
  text-align:center;
  font-size:14px;
}

.tasks{
  padding:15px 20px;
}

.task-item{
  display:flex;
  align-items:center;
  gap:12px;
  padding:10px 0;
  border-bottom:1px solid #f3f4f6;
}

.task-text{
  flex:1;
  font-size:16px;
}

.task-text.completed{
  text-decoration:line-through;
  color:#9ca3af;
}

/* ===== „É°„Éã„É•„Éº ===== */
.menu-section{
  background:#fff;
  border-radius:12px;
  padding:20px;
  margin-top:30px;
}

.menu-input{
  width:100%;
  padding:12px;
  font-size:16px;
}

.menu-tag{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:8px 12px;
  background:#eff6ff;
  border-radius:20px;
  margin:5px;
  font-size:14px;
}
</style>
</head>

<body>

<div class="header">
  <h1>Strength</h1>
  <button class="reload-btn" onclick="location.reload()">‚ü≥</button>
</div>

<div class="container">

  <!-- ÁõÆÊ®ô -->
  <div class="goal-section">
    <div class="goal-header">
      <div class="goal-title">üèÜ ÁõÆÊ®ô</div>
      <button class="add-goal-btn" onclick="toggleGoalInput()">+</button>
    </div>
    <input id="goal-input" class="goal-input" placeholder="ÁõÆÊ®ô„ÇíÂÖ•Âäõ">
    <div id="goal-list"></div>
  </div>

  <!-- ÊõúÊó• -->
  <div id="days-container"></div>

  <!-- „É°„Éã„É•„Éº -->
  <div class="menu-section">
    <input id="menu-input" class="menu-input" placeholder="„É°„Éã„É•„Éº„ÇíÂÖ•Âäõ„Åó„Å¶Enter">
    <div id="menu-list"></div>
  </div>

</div>

<script>
const DAYS=['ÊúàÊõú','ÁÅ´Êõú','Ê∞¥Êõú','Êú®Êõú','ÈáëÊõú','ÂúüÊõú','Êó•Êõú'];
const STORAGE_KEY='strength-data';

let exercises=[];
let goals=[];
let dailyTasks={ÊúàÊõú:[],ÁÅ´Êõú:[],Ê∞¥Êõú:[],Êú®Êõú:[],ÈáëÊõú:[],ÂúüÊõú:[],Êó•Êõú:[]};
let currentSelector=null;

/* Ê∞∏Á∂öÂåñ */
function saveData(){
  localStorage.setItem(STORAGE_KEY,JSON.stringify({exercises,goals,dailyTasks}));
}
function loadData(){
  const d=JSON.parse(localStorage.getItem(STORAGE_KEY));
  if(!d)return;
  exercises=d.exercises||[];
  goals=d.goals||[];
  dailyTasks=d.dailyTasks||dailyTasks;
}

/* ÊõúÊó• */
function renderDays(){
  const c=document.getElementById('days-container');
  c.innerHTML=DAYS.map(day=>`
    <div class="day-card">
      <div class="day-header" onclick="toggleSelector('${day}')">
        <div class="day-name">${day}</div>
        <button class="add-btn">+</button>
      </div>
      <div id="selector-${day}" class="exercise-selector">
        <div class="exercise-grid" id="grid-${day}"></div>
      </div>
      <div class="tasks" id="tasks-${day}"></div>
    </div>
  `).join('');
  DAYS.forEach(renderTasks);
}

function toggleSelector(day){
  const s=document.getElementById(`selector-${day}`);
  if(currentSelector && currentSelector!==s)currentSelector.classList.remove('show');
  s.classList.toggle('show');
  currentSelector=s.classList.contains('show')?s:null;
  renderExerciseOptions(day);
}

function renderExerciseOptions(day){
  document.getElementById(`grid-${day}`).innerHTML=
    exercises.map((e,i)=>`
      <div class="exercise-option" onclick="addTask('${day}',${i})">${e}</div>
    `).join('');
}

function addTask(day,i){
  dailyTasks[day].push({id:Date.now(),text:exercises[i],done:false});
  saveData();
  renderTasks(day);
  document.getElementById(`selector-${day}`).classList.remove('show');
}

function renderTasks(day){
  document.getElementById(`tasks-${day}`).innerHTML=
    dailyTasks[day].map(t=>`
      <div class="task-item">
        <input type="checkbox" ${t.done?'checked':''}
          onchange="toggleTask('${day}',${t.id})">
        <div class="task-text ${t.done?'completed':''}">${t.text}</div>
      </div>
    `).join('');
}

function toggleTask(day,id){
  const t=dailyTasks[day].find(x=>x.id===id);
  t.done=!t.done;
  saveData();
  renderTasks(day);
}

/* ÁõÆÊ®ô */
function toggleGoalInput(){
  document.getElementById('goal-input').classList.toggle('show');
}
function addGoal(){
  const i=document.getElementById('goal-input');
  if(!i.value.trim())return;
  goals.push(i.value.trim());
  i.value='';
  i.classList.remove('show');
  saveData();
  renderGoals();
}
function renderGoals(){
  document.getElementById('goal-list').innerHTML=
    goals.map((g,i)=>`
      <div class="goal-item">
        <span class="goal-bullet"></span>
        <div class="goal-text">${g}</div>
        <button class="remove-goal-btn" onclick="removeGoal(${i})">√ó</button>
      </div>
    `).join('');
}
function removeGoal(i){
  goals.splice(i,1);
  saveData();
  renderGoals();
}

/* „É°„Éã„É•„Éº */
function renderMenu(){
  document.getElementById('menu-list').innerHTML=
    exercises.map(e=>`<span class="menu-tag">${e}</span>`).join('');
}

document.getElementById('menu-input').addEventListener('keypress',e=>{
  if(e.key==='Enter'){
    exercises.push(e.target.value);
    e.target.value='';
    saveData();
    renderMenu();
  }
});
document.getElementById('goal-input').addEventListener('keypress',e=>{
  if(e.key==='Enter')addGoal();
});

/* Ëµ∑Âãï */
loadData();
renderGoals();
renderMenu();
renderDays();
</script>

</body>
</html>
