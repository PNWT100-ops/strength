<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Strength">
  <title>Strength</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding-bottom: 20px;
    }
    
    .header {
      background: rgba(0, 0, 0, 0.3);
      color: white;
      padding: 20px;
      text-align: center;
      position: sticky;
      top: 0;
      z-index: 100;
      backdrop-filter: blur(10px);
    }
    
    .header h1 {
      font-size: 28px;
      font-weight: bold;
    }
    
    .reload-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      background: none;
      border: none;
      color: rgba(255, 255, 255, 0.3);
      cursor: pointer;
      font-size: 18px;
      padding: 5px;
    }
    
    .reload-btn:hover {
      color: rgba(255, 255, 255, 0.5);
    }
    
    .container {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .day-card {
      background: white;
      border-radius: 12px;
      margin-bottom: 20px;
      overflow: hidden;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .day-header {
      padding: 15px 20px;
      background: #f3f4f6;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .day-name {
      font-size: 18px;
      font-weight: bold;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .today-badge {
      width: 8px;
      height: 8px;
      background: #667eea;
      border-radius: 50%;
      display: inline-block;
    }
    
    .add-btn {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: none;
      background: rgba(102, 126, 234, 0.2);
      color: #667eea;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }
    
    .exercise-selector {
      padding: 15px;
      background: #eff6ff;
      border-bottom: 1px solid #dbeafe;
      display: none;
    }
    
    .exercise-selector.show {
      display: block;
    }
    
    .exercise-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    
    .exercise-option {
      padding: 10px;
      background: white;
      border: 1px solid #bfdbfe;
      border-radius: 8px;
      cursor: pointer;
      text-align: center;
      font-size: 14px;
    }
    
    .exercise-option:hover {
      background: #dbeafe;
    }
    
    .tasks {
      padding: 15px 20px;
    }
    
    .task-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 10px 0;
      border-bottom: 1px solid #f3f4f6;
    }
    
    .task-item:last-child {
      border-bottom: none;
    }
    
    .task-checkbox {
      width: 20px;
      height: 20px;
      cursor: pointer;
    }
    
    .task-text {
      flex: 1;
      font-size: 16px;
    }
    
    .task-text.completed {
      text-decoration: line-through;
      color: #9ca3af;
    }
    
    .delete-btn {
      background: none;
      border: none;
      color: #ef4444;
      cursor: pointer;
      font-size: 18px;
      padding: 5px;
      opacity: 0;
      transition: opacity 0.2s;
    }
    
    .task-item:hover .delete-btn {
      opacity: 1;
    }
    
    .empty-message {
      color: #9ca3af;
      font-size: 14px;
      text-align: center;
      padding: 20px;
    }
    
    .menu-section {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-top: 30px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .menu-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 15px;
      color: #1f2937;
    }
    
    .input-group {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }
    
    .menu-input {
      flex: 1;
      padding: 12px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 16px;
    }
    
    .menu-input:focus {
      outline: none;
      border-color: #667eea;
    }
    
    .add-menu-btn {
      padding: 12px 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
    }
    
    .menu-list {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    .menu-tag {
      padding: 8px 12px;
      background: #eff6ff;
      border: 1px solid #bfdbfe;
      border-radius: 20px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }
    
    .remove-menu-btn {
      background: none;
      border: none;
      color: #ef4444;
      cursor: pointer;
      font-size: 16px;
      padding: 0;
      display: flex;
      align-items: center;
    }
    
    .goal-section {
      background: linear-gradient(135deg, #3b18ff 0%, #3b18ff 100%);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    .goal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .goal-title {
      font-size: 18px;
      font-weight: bold;
      color: #ffffff;
    }
    
    .add-goal-btn {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: none;
      background: rgba(255, 255, 255, 0.2);
      color: #ffffff;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }
    
    .goal-input {
      width: 100%;
      padding: 12px;
      border: 2px solid rgba(255, 255, 255, 0.5);
      border-radius: 8px;
      font-size: 16px;
      margin-bottom: 10px;
      background: white;
      display: none;
    }
    
    .goal-input.show {
      display: block;
    }
    
    .goal-input:focus {
      outline: none;
      border-color: #ffffff;
    }
    
    .goal-list {
      margin-top: 15px;
    }
    
    .goal-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 0;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      font-size: 15px;
    }
    
    .goal-item:last-child {
      border-bottom: none;
    }
    
    .goal-bullet {
      width: 6px;
      height: 6px;
      background: #ffffff;
      border-radius: 50%;
      flex-shrink: 0;
    }
    
    .goal-text {
      flex: 1;
      color: #ffffff;
    }
    
    .remove-goal-btn {
      background: none;
      border: none;
      color: #ffffff;
      cursor: pointer;
      font-size: 16px;
      padding: 5px;
      opacity: 0;
      transition: opacity 0.2s;
    }
    
    .goal-item:hover .remove-goal-btn {
      opacity: 1;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>Strength</h1>
    <button class="reload-btn" onclick="location.reload()">‚ü≥</button>
  </div>
  
  <div class="container">
    <div class="goal-section">
      <div class="goal-header">
        <div class="goal-title">üèÜÁõÆÊ®ô</div>
        <button class="add-goal-btn" onclick="toggleGoalInput()">+</button>
      </div>
      <input type="text" id="goal-input" class="goal-input" placeholder="ÁõÆÊ®ô„ÇíÂÖ•Âäõ">
      <div id="goal-list" class="goal-list"></div>
    </div>
    
    <div id="days-container"></div>
    
    <div class="menu-section">
      <div class="menu-title">„É°„Éã„É•„ÉºÁôªÈå≤</div>
      <div class="input-group">
        <input type="text" id="menu-input" class="menu-input" placeholder="‰æã: „Çπ„ÇØ„ÉØ„ÉÉ„Éà„ÄÅËÖïÁ´ã„Å¶‰ºè„Åõ">
        <button class="add-menu-btn" onclick="addExercise()">ËøΩÂä†</button>
      </div>
      <div id="menu-list" class="menu-list"></div>
    </div>
  </div>

  <script>
    const DAYS = ['ÊúàÊõú', 'ÁÅ´Êõú', 'Ê∞¥Êõú', 'Êú®Êõú', 'ÈáëÊõú', 'ÂúüÊõú', 'Êó•Êõú'];
    let exercises = [];
    let goals = [];
    let dailyTasks = {
      ÊúàÊõú: [], ÁÅ´Êõú: [], Ê∞¥Êõú: [], Êú®Êõú: [], ÈáëÊõú: [], ÂúüÊõú: [], Êó•Êõú: []
    };
    let currentSelector = null;

    // „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Åã„Çâ„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„ÇÄ
    function loadData() {
      const savedExercises = localStorage.getItem('exercises');
      const savedGoals = localStorage.getItem('goals');
      const savedDailyTasks = localStorage.getItem('dailyTasks');
      
      if (savedExercises) {
        exercises = JSON.parse(savedExercises);
      }
      
      if (savedGoals) {
        goals = JSON.parse(savedGoals);
      }
      
      if (savedDailyTasks) {
        dailyTasks = JSON.parse(savedDailyTasks);
      }
    }

    // „É≠„Éº„Ç´„É´„Çπ„Éà„É¨„Éº„Ç∏„Å´„Éá„Éº„Çø„Çí‰øùÂ≠ò„Åô„Çã
    function saveData() {
      localStorage.setItem('exercises', JSON.stringify(exercises));
      localStorage.setItem('goals', JSON.stringify(goals));
      localStorage.setItem('dailyTasks', JSON.stringify(dailyTasks));
    }

    function getTodayIndex() {
      const today = new Date().getDay();
      return today === 0 ? 6 : today - 1;
    }

    function reorderDays() {
      const todayIndex = getTodayIndex();
      return [...DAYS.slice(todayIndex), ...DAYS.slice(0, todayIndex)];
    }

    function renderDays() {
      const container = document.getElementById('days-container');
      const orderedDays = reorderDays();
      
      container.innerHTML = orderedDays.map((day, index) => `
        <div class="day-card">
          <div class="day-header" onclick="toggleSelector('${day}')">
            <div class="day-name">
              ${index === 0 ? '<span class="today-badge"></span>' : ''}
              ${day}
            </div>
            <button class="add-btn">+</button>
          </div>
          <div id="selector-${day}" class="exercise-selector">
            <div class="exercise-grid" id="grid-${day}"></div>
          </div>
          <div class="tasks" id="tasks-${day}"></div>
        </div>
      `).join('');
      
      renderAllTasks();
    }

    function toggleSelector(day) {
      const selector = document.getElementById(`selector-${day}`);
      
      if (currentSelector && currentSelector !== selector) {
        currentSelector.classList.remove('show');
      }
      
      selector.classList.toggle('show');
      currentSelector = selector.classList.contains('show') ? selector : null;
      
      if (selector.classList.contains('show')) {
        renderExerciseOptions(day);
      }
    }

    function renderExerciseOptions(day) {
      const grid = document.getElementById(`grid-${day}`);
      grid.innerHTML = exercises.map((exercise, index) => `
        <div class="exercise-option" onclick="addTaskToDay('${day}', ${index})">
          ${exercise}
        </div>
      `).join('');
    }

    function addTaskToDay(day, exerciseIndex) {
      const task = {
        id: Date.now(),
        text: exercises[exerciseIndex],
        completed: false
      };
      dailyTasks[day].push(task);
      renderTasks(day);
      saveData();
      
      const selector = document.getElementById(`selector-${day}`);
      selector.classList.remove('show');
      currentSelector = null;
    }

    function renderTasks(day) {
      const container = document.getElementById(`tasks-${day}`);
      const tasks = dailyTasks[day];
      
      if (tasks.length === 0) {
        container.innerHTML = '<div class="empty-message">„É°„Éã„É•„Éº„ÇíËøΩÂä†„Åó„Å¶„Åè„Å†„Åï„ÅÑ</div>';
        return;
      }
      
      container.innerHTML = tasks.map(task => `
        <div class="task-item">
          <input type="checkbox" class="task-checkbox" 
                 ${task.completed ? 'checked' : ''} 
                 onchange="toggleTask('${day}', ${task.id})">
          <div class="task-text ${task.completed ? 'completed' : ''}">${task.text}</div>
          <button class="delete-btn" onclick="removeTask('${day}', ${task.id})">√ó</button>
        </div>
      `).join('');
    }

    function renderAllTasks() {
      DAYS.forEach(day => renderTasks(day));
    }

    function toggleTask(day, taskId) {
      const task = dailyTasks[day].find(t => t.id === taskId);
      if (task) {
        task.completed = !task.completed;
        renderTasks(day);
        saveData();
      }
    }

    function removeTask(day, taskId) {
      dailyTasks[day] = dailyTasks[day].filter(t => t.id !== taskId);
      renderTasks(day);
      saveData();
    }

    function addExercise() {
      const input = document.getElementById('menu-input');
      const value = input.value.trim();
      
      if (value) {
        exercises.push(value);
        input.value = '';
        renderMenuList();
        saveData();
      }
    }

    function removeExercise(index) {
      exercises.splice(index, 1);
      renderMenuList();
      saveData();
    }

    function renderMenuList() {
      const list = document.getElementById('menu-list');
      list.innerHTML = exercises.map((exercise, index) => `
        <div class="menu-tag">
          ${exercise}
          <button class="remove-menu-btn" onclick="removeExercise(${index})">√ó</button>
        </div>
      `).join('');
    }
    
    function toggleGoalInput() {
      const input = document.getElementById('goal-input');
      input.classList.toggle('show');
      if (input.classList.contains('show')) {
        input.focus();
      }
    }
    
    function addGoal() {
      const input = document.getElementById('goal-input');
      const value = input.value.trim();
      
      if (value) {
        goals.push(value);
        input.value = '';
        input.classList.remove('show');
        renderGoalList();
        saveData();
      }
    }
    
    function removeGoal(index) {
      goals.splice(index, 1);
      renderGoalList();
      saveData();
    }
    
    function renderGoalList() {
      const list = document.getElementById('goal-list');
      if (goals.length === 0) {
        list.innerHTML = '';
        return;
      }
      list.innerHTML = goals.map((goal, index) => `
        <div class="goal-item">
          <span class="goal-bullet"></span>
          <div class="goal-text">${goal}</div>
          <button class="remove-goal-btn" onclick="removeGoal(${index})">√ó</button>
        </div>
      `).join('');
    }

    document.getElementById('menu-input').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        addExercise();
      }
    });
    
    document.getElementById('goal-input').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        addGoal();
      }
    });

    // ÂàùÊúüÂåñÊôÇ„Å´„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„ÇÄ
    loadData();
    renderDays();
    renderMenuList();
    renderGoalList();
  </script>
</body>
</html>
